<section id="contact" class="contact">
  <div class="container">
    <div class="section-header">
      <h2>Demandez Votre Devis Gratuit</h2>
      <p>Contactez-nous pour obtenir une estimation personnalis√©e de votre d√©m√©nagement</p>
    </div>

    <div class="contact-content">
      <div class="contact-info">
        <h3>Nos Coordonn√©es</h3>

        <div class="contact-item">
          <div class="contact-icon">
            <i class="fas fa-map-marker-alt"></i>
          </div>
          <div class="contact-details">
            <h4>Adresse</h4>
            <p>3 rue Louise Michel<br>93400 Saint-Ouen, France</p>
          </div>
        </div>

        <div class="contact-item">
          <div class="contact-icon">
            <i class="fas fa-phone"></i>
          </div>
          <div class="contact-details">
            <h4>T√©l√©phone</h4>
            <p><a href="tel:+33170240860">01 70 24 08 60</a></p>
            <span class="availability">Disponible 7j/7 de 8h √† 20h</span>
          </div>
        </div>

        <div class="contact-item">
          <div class="contact-icon">
            <i class="fas fa-envelope"></i>
          </div>
          <div class="contact-details">
            <h4>Email</h4>
            <p><a href="mailto:reflexdemenagement@gmail.com">reflexdemenagement@gmail.com</a></p>
          </div>
        </div>

        <div class="contact-item">
          <div class="contact-icon">
            <i class="fas fa-clock"></i>
          </div>
          <div class="contact-details">
            <h4>Urgences</h4>
            <p><a href="tel:+33170240860">01 70 24 08 60</a></p>
            <span class="availability">Service d'urgence 24h/24</span>
          </div>
        </div>

        <div class="guarantees">
          <h4>Nos Garanties</h4>
          <ul>
            <li><i class="fas fa-check"></i> Devis gratuit et sans engagement</li>
            <li><i class="fas fa-check"></i> R√©ponse sous 24h</li>
            <li><i class="fas fa-check"></i> Prix transparent</li>
            <li><i class="fas fa-check"></i> Assurance tous risques incluse</li>
          </ul>
        </div>
      </div>

      <div class="contact-form">
        <!-- Messages de succ√®s et d'erreur -->
        <div class="alert alert-success" *ngIf="submitMessage">
          <i class="fas fa-check-circle"></i>
          {{ submitMessage }}
          <br *ngIf="showGmailButton">
          <div *ngIf="showGmailButton" class="gmail-actions">
            <a [href]="gmailWebLink" target="_blank" rel="noopener">
              <button class="gmail-button primary" type="button">
                üåê Envoyer via Gmail (Navigateur)
              </button>
            </a>
            <a [href]="gmailLink" target="_blank">
              <button class="gmail-button secondary" type="button">
                üì± Envoyer via Application Gmail
              </button>
            </a>
          </div>
          <br *ngIf="showGmailButton">
          <small *ngIf="showGmailButton" class="gmail-help">
            <strong>Envoyez votre demande directement √† reflexdemenagement@gmail.com</strong>
          </small>
        </div>
        
        <div class="alert alert-error" *ngIf="submitError">
          <i class="fas fa-exclamation-circle"></i>
          {{ submitError }}
        </div>

        <form [formGroup]="contactForm" (ngSubmit)="onSubmit()">
          <div class="form-row">
            <div class="form-group">
              <label for="nom">Nom complet *</label>
              <input type="text" id="nom" formControlName="nom" [class.error]="isFieldInvalid('nom')"
                placeholder="Votre nom et pr√©nom">
              <span class="error-message" *ngIf="isFieldInvalid('nom')">
                {{ getFieldError('nom') }}
              </span>
            </div>

            <div class="form-group">
              <label for="email">Email *</label>
              <input type="email" id="email" formControlName="email" [class.error]="isFieldInvalid('email')"
                placeholder="votre.email@exemple.com">
              <span class="error-message" *ngIf="isFieldInvalid('email')">
                {{ getFieldError('email') }}
              </span>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="telephone">T√©l√©phone *</label>
              <input type="tel" id="telephone" formControlName="telephone" [class.error]="isFieldInvalid('telephone')"
                placeholder="01 70 24 08 60">
              <span class="error-message" *ngIf="isFieldInvalid('telephone')">
                {{ getFieldError('telephone') }}
              </span>
            </div>

            <div class="form-group">
              <label for="typeService">Type de service *</label>
              <select id="typeService" formControlName="typeService" [class.error]="isFieldInvalid('typeService')">
                <option value="">S√©lectionnez un service</option>
                <option value="residentiel">D√©m√©nagement r√©sidentiel</option>
                <option value="professionnel">D√©m√©nagement professionnel</option>
                <option value="international">D√©m√©nagement international</option>
                <option value="garde-meuble">Garde-meuble</option>
                <option value="express">D√©m√©nagement express</option>
                <option value="autre">Autre service</option>
              </select>
              <span class="error-message" *ngIf="isFieldInvalid('typeService')">
                {{ getFieldError('typeService') }}
              </span>
            </div>
          </div>

          <div class="form-group">
            <label for="datePrevisionnelle">Date pr√©visionnelle</label>
            <input type="date" id="datePrevisionnelle" formControlName="datePrevisionnelle">
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="adresseDepart">Adresse de d√©part *</label>
              <input type="text" id="adresseDepart" formControlName="adresseDepart"
                [class.error]="isFieldInvalid('adresseDepart')" placeholder="Adresse compl√®te de d√©part">
              <span class="error-message" *ngIf="isFieldInvalid('adresseDepart')">
                {{ getFieldError('adresseDepart') }}
              </span>
            </div>

            <div class="form-group">
              <label for="adresseArrivee">Adresse d'arriv√©e *</label>
              <input type="text" id="adresseArrivee" formControlName="adresseArrivee"
                [class.error]="isFieldInvalid('adresseArrivee')" placeholder="Adresse compl√®te d'arriv√©e">
              <span class="error-message" *ngIf="isFieldInvalid('adresseArrivee')">
                {{ getFieldError('adresseArrivee') }}
              </span>
            </div>
          </div>

          <div class="form-group">
            <label for="message">Message *</label>
            <textarea id="message" formControlName="message" [class.error]="isFieldInvalid('message')" rows="5"
              placeholder="D√©crivez votre projet de d√©m√©nagement (volume, sp√©cificit√©s, √©tage, ascenseur, etc.)"></textarea>
            <span class="error-message" *ngIf="isFieldInvalid('message')">
              {{ getFieldError('message') }}
            </span>
          </div>

          <button type="submit" class="btn-submit" [disabled]="isSubmitted">
            <i class="fas fa-paper-plane" *ngIf="!isSubmitted"></i>
            <i class="fas fa-spinner fa-spin" *ngIf="isSubmitted"></i>
            {{ isSubmitted ? 'Envoi en cours...' : 'Envoyer ma demande' }}
          </button>
        </form>
      </div>
    </div>
  </div>
</section>